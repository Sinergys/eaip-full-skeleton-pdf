# ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ –≤—ã—Å–æ–∫–æ–≥–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ (P1)

## üìã –°—Ç–∞—Ç—É—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

### ‚úÖ –ó–∞–¥–∞—á–∞ 1: –£–ª—É—á—à–µ–Ω–∏–µ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Ä–µ—Å—É—Ä—Å–æ–≤ —Å AI

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å AIContentClassifier –≤ ResourceClassifier

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–í–´–ü–û–õ–ù–ï–ù–û**

#### –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ:

1. **–°–æ–∑–¥–∞–Ω –º–æ–¥—É–ª—å `ai_content_classifier.py`:**
   - –ö–ª–∞—Å—Å `AIContentClassifier` –¥–ª—è AI-–∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ —Ñ–∞–π–ª–æ–≤
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç LLM (DeepSeek, OpenAI, Anthropic) –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö
   - –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–∏–ø —Ä–µ—Å—É—Ä—Å–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ, –∞ –Ω–µ —Ç–æ–ª—å–∫–æ –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞

2. **–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ `ResourceClassifier`:**
   - –î–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç `get_ai_content_classifier`
   - –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω –º–µ—Ç–æ–¥ `classify()` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è AI –ø—Ä–∏ –Ω–µ—É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ –ø—Ä–∞–≤–∏–ª
   - –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏:
     1. –ü—Ä–∞–≤–∏–ª–∞ (–±—ã—Å—Ç—Ä–æ –∏ —Ç–æ—á–Ω–æ)
     2. AI (–∫–æ–≥–¥–∞ –ø—Ä–∞–≤–∏–ª–∞ –Ω–µ—É–≤–µ—Ä–µ–Ω–Ω—ã)
     3. –ê–Ω–∞–ª–∏–∑ –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞
     4. Fallback –Ω–∞ "other"

3. **–õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã:**
   - –ï—Å–ª–∏ –ø—Ä–∞–≤–∏–ª–∞ –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–∏–ª–∏ —Ç–∏–ø ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è AI
   - AI –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–∏–ø –∏ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å (0.0-1.0)
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–∏–ø —Å —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å—é >= 0.7 (–≤—ã—Å–æ–∫–∞—è) –∏–ª–∏ >= 0.5 (–Ω–∏–∑–∫–∞—è, —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º)
   - Graceful fallback –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö AI

#### –§–∞–π–ª—ã:
- ‚úÖ `eaip_full_skeleton/services/ingest/utils/ai_content_classifier.py` - —Å–æ–∑–¥–∞–Ω
- ‚úÖ `eaip_full_skeleton/services/ingest/utils/resource_classifier.py` - –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω
- ‚úÖ `eaip_full_skeleton/services/ingest/utils/AI_CONTENT_CLASSIFIER_README.md` - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

---

### ‚úÖ –ó–∞–¥–∞—á–∞ 2: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —Ñ–æ—Ä–º—É–ª

**–†–µ—à–µ–Ω–∏–µ:** –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å ai_formula_restorer.py –≤ –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –ø–∞—Å–ø–æ—Ä—Ç–∞

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–í–´–ü–û–õ–ù–ï–ù–û**

#### –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ:

1. **–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ `main.py`:**
   - –î–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç `AIFormulaRestorer` –∏ `restore_formulas_in_file`
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –º–æ–¥—É–ª—è (`HAS_FORMULA_RESTORER`)
   - –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Ñ–æ—Ä–º—É–ª –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö –ª–∏—Å—Ç–æ–≤, –Ω–æ –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º

2. **–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ `fill_energy_passport.py`:**
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —Ñ–æ—Ä–º—É–ª –≤ —Ñ—É–Ω–∫—Ü–∏—é `main()`
   - –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö –ª–∏—Å—Ç–æ–≤
   - Graceful fallback –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

3. **–õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã:**
   - –°–∫–∞–Ω–∏—Ä—É–µ—Ç –≤—Å–µ –ª–∏—Å—Ç—ã —Ä–∞–±–æ—á–µ–π –∫–Ω–∏–≥–∏
   - –ò—â–µ—Ç —è—á–µ–π–∫–∏ —Å —Ñ–æ—Ä–º—É–ª–∞–º–∏, —Å–æ–¥–µ—Ä–∂–∞—â–∏–º–∏ `#REF!`
   - –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Ñ–æ—Ä–º—É–ª—ã –ø–æ –ø–∞—Ç—Ç–µ—Ä–Ω—É —Å–æ—Å–µ–¥–Ω–∏—Ö —è—á–µ–µ–∫
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç AI –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤ (–∑–∞–≥–æ—Ç–æ–≤–∫–∞ –¥–ª—è –±—É–¥—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏)
   - –õ–æ–≥–∏—Ä—É–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö —Ñ–æ—Ä–º—É–ª

#### –§–∞–π–ª—ã:
- ‚úÖ `eaip_full_skeleton/services/ingest/main.py` - –¥–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç –∏ –ª–æ–≥–∏–∫–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
- ‚úÖ `tools/fill_energy_passport.py` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
- ‚úÖ `eaip_full_skeleton/services/ingest/utils/ai_formula_restorer.py` - —É–∂–µ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–ª

---

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –£–ª—É—á—à–µ–Ω–∏–µ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Ä–µ—Å—É—Ä—Å–æ–≤:
- ‚úÖ AI-–∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ fallback –¥–ª—è –Ω–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö AI-–ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ (DeepSeek, OpenAI, Anthropic)
- ‚úÖ Graceful degradation –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ AI
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏

### –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Ñ–æ—Ä–º—É–ª:
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Ñ–æ—Ä–º—É–ª —Å –æ—à–∏–±–∫–∞–º–∏ `#REF!`
- ‚úÖ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ –ø–∞—Ç—Ç–µ—Ä–Ω—É —Å–æ—Å–µ–¥–Ω–∏—Ö —è—á–µ–µ–∫
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –æ–±–∞ –ø—É—Ç–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ (main.py –∏ fill_energy_passport.py)
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è

---

## üîç –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —Ç–µ—Å—Ç—ã:

1. **–ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤:**
   - –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª —Å –Ω–µ–æ—á–µ–≤–∏–¥–Ω—ã–º –∏–º–µ–Ω–µ–º
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ AI –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏–ª —Ç–∏–ø —Ä–µ—Å—É—Ä—Å–∞
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ AI-–∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏

2. **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Ñ–æ—Ä–º—É–ª:**
   - –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Å–ø–æ—Ä—Ç —Å —à–∞–±–ª–æ–Ω–æ–º, —Å–æ–¥–µ—Ä–∂–∞—â–∏–º `#REF!` –æ—à–∏–±–∫–∏
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Ñ–æ—Ä–º—É–ª—ã –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö —Ñ–æ—Ä–º—É–ª

---

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –û–±–µ –∑–∞–¥–∞—á–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã —Å graceful fallback - —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –¥–∞–∂–µ –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ AI
- –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ–±—Ä–∞—Ç–Ω–æ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã
- –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

