# ‚ö° –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞ –ê–¢–õ–ê–°

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–û–±–∑–æ—Ä –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π](#–æ–±–∑–æ—Ä-–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π)
2. [–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ AI-–∑–∞–ø—Ä–æ—Å–æ–≤](#–∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ-ai-–∑–∞–ø—Ä–æ—Å–æ–≤)
3. [–ë–∞—Ç—á–µ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞](#–±–∞—Ç—á–µ–≤–∞—è-–æ–±—Ä–∞–±–æ—Ç–∫–∞)
4. [–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è OCR](#–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è-ocr)
5. [Connection Pooling](#connection-pooling)
6. [–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏](#–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥-–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏)

---

## üéØ –û–±–∑–æ—Ä –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π

–ü—Ä–æ–µ–∫—Ç –≤–∫–ª—é—á–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:

- ‚úÖ **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ AI-–∑–∞–ø—Ä–æ—Å–æ–≤** - Redis/in-memory –∫—ç—à –¥–ª—è –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ **–ë–∞—Ç—á–µ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞** - –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- ‚úÖ **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–∞–º—è—Ç–∏ OCR** - –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏ –ø—Ä–∏ OCR
- ‚úÖ **Connection Pooling** - –ü—É–ª —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –¥–ª—è –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞** - –ù–µ–±–ª–æ–∫–∏—Ä—É—é—â–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤

---

## üíæ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ AI-–∑–∞–ø—Ä–æ—Å–æ–≤

### –û–ø–∏—Å–∞–Ω–∏–µ

–ú–æ–¥—É–ª—å `utils/ai_cache.py` –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ AI-–∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è —É–º–µ–Ω—å—à–µ–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –æ–±—Ä–∞—â–µ–Ω–∏–π –∫ API –∏ —É—Å–∫–æ—Ä–µ–Ω–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏.

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```python
from utils.ai_cache import get_ai_cache

cache = get_ai_cache()

# –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–∑ –∫—ç—à–∞
result = cache.get(prompt="–ê–Ω–∞–ª–∏–∑ —ç–Ω–µ—Ä–≥–æ–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è", document_type="energy_passport")

if result is None:
    # –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ AI-–∑–∞–ø—Ä–æ—Å–∞
    result = ai_parser.structure_data(raw_text)
    # –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –∫—ç—à
    cache.set(prompt="–ê–Ω–∞–ª–∏–∑ —ç–Ω–µ—Ä–≥–æ–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è", result=result, document_type="energy_passport")
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞

```bash
# –í .env.prod
AI_CACHE_TTL_SECONDS=3600  # –í—Ä–µ–º—è –∂–∏–∑–Ω–∏ –∫—ç—à–∞ (1 —á–∞—Å)
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=your_password
```

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫—ç—à–∞

```python
from utils.ai_cache import get_ai_cache

cache = get_ai_cache()
stats = cache.get_stats()

print(f"Backend: {stats['backend']}")
print(f"Total entries: {stats['total_entries']}")
```

### –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞

```python
# –û—á–∏—Å—Ç–∫–∞ –≤—Å–µ–≥–æ –∫—ç—à–∞
cache.clear()

# –û—á–∏—Å—Ç–∫–∞ –ø–æ –ø–∞—Ç—Ç–µ—Ä–Ω—É
cache.clear(pattern="ai_cache:energy_*")
```

---

## üì¶ –ë–∞—Ç—á–µ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞

### –û–ø–∏—Å–∞–Ω–∏–µ

–ú–æ–¥—É–ª—å `utils/batch_processor.py` –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏.

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```python
from utils.batch_processor import get_batch_processor
from file_parser import parse_file

processor = get_batch_processor(max_workers=4, batch_size=10)

# –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∞–π–ª–æ–≤
file_paths = ["file1.pdf", "file2.pdf", "file3.pdf"]
results = processor.process_files_batch(file_paths, parse_file)

# –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å –ø—Ä–æ–≥—Ä–µ—Å—Å–æ–º
def progress_callback(current, total):
    print(f"–û–±—Ä–∞–±–æ—Ç–∞–Ω–æ: {current}/{total}")

results = processor.process_batch(
    items=file_paths,
    processor_func=parse_file,
    progress_callback=progress_callback
)
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞

```bash
# –í .env.prod
BATCH_MAX_WORKERS=4      # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –≤–æ—Ä–∫–µ—Ä–æ–≤
BATCH_SIZE=10            # –†–∞–∑–º–µ—Ä –±–∞—Ç—á–∞
```

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

- **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ—Ä–∫–µ—Ä–æ–≤**: –ù–µ –¥–æ–ª–∂–Ω–æ –ø—Ä–µ–≤—ã—à–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ CPU —è–¥–µ—Ä
- **–†–∞–∑–º–µ—Ä –±–∞—Ç—á–∞**: –ó–∞–≤–∏—Å–∏—Ç –æ—Ç —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–æ–≤ (10-20 –¥–ª—è PDF, 50+ –¥–ª—è Excel)
- **–ü–∞–º—è—Ç—å**: –£—á–∏—Ç—ã–≤–∞–π—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏ –ø—Ä–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–µ

---

## üîç –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è OCR

### –û–ø–∏—Å–∞–Ω–∏–µ

–ú–æ–¥—É–ª—å `utils/ocr_memory_optimizer.py` –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏ –ø—Ä–∏ OCR –æ–±—Ä–∞–±–æ—Ç–∫–µ –±–æ–ª—å—à–∏—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π.

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```python
from utils.ocr_memory_optimizer import get_ocr_memory_optimizer
from PIL import Image

optimizer = get_ocr_memory_optimizer()

# –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
image = Image.open("large_image.jpg")

# –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–µ—Ä–µ–¥ OCR
optimized_image = optimizer.optimize_image_for_ocr(
    image,
    target_dpi=300,
    max_dimension=2000
)

# –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ —á–∞—Å—Ç—è–º –¥–ª—è –æ—á–µ–Ω—å –±–æ–ª—å—à–∏—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
def process_chunk(chunk):
    # –û–±—Ä–∞–±–æ—Ç–∫–∞ —á–∞–Ω–∫–∞
    return ocr_result

results = optimizer.process_image_in_chunks(
    image,
    chunk_height=1000,
    processor_func=process_chunk
)

# –û—á–∏—Å—Ç–∫–∞ –ø–∞–º—è—Ç–∏
optimizer.cleanup_memory()
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞

```bash
# –í .env.prod
OCR_MAX_IMAGE_SIZE_MB=10.0  # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
```

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

- **DPI**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ 300 DPI –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä**: –û–≥—Ä–∞–Ω–∏—á—å—Ç–µ —Ä–∞–∑–º–µ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ –ø–∞–º—è—Ç–∏
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ —á–∞—Å—Ç—è–º**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π > 50 MB

---

## üîå Connection Pooling

### –û–ø–∏—Å–∞–Ω–∏–µ

–ú–æ–¥—É–ª—å `utils/connection_pool.py` –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è–º–∏ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ connection pooling.

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```python
from utils.connection_pool import get_db_pool

pool = get_db_pool()

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ PostgreSQL –ø—É–ª–∞
with pool.get_postgres_connection() as conn:
    cursor = conn.cursor()
    cursor.execute("SELECT * FROM enterprises")
    results = cursor.fetchall()

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ SQLAlchemy —Å–µ—Å—Å–∏–∏
with pool.get_sqlalchemy_session() as session:
    enterprises = session.query(Enterprise).all()
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞

```bash
# –í .env.prod
POSTGRES_POOL_MIN=2              # –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
POSTGRES_POOL_MAX=10             # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
SQLALCHEMY_POOL_SIZE=5            # –†–∞–∑–º–µ—Ä –ø—É–ª–∞ SQLAlchemy
SQLALCHEMY_MAX_OVERFLOW=10       # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π overflow
SQLALCHEMY_POOL_TIMEOUT=30       # –¢–∞–π–º–∞—É—Ç –ø–æ–ª—É—á–µ–Ω–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
```

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—É–ª–∞

```python
from utils.connection_pool import get_db_pool

pool = get_db_pool()
stats = pool.get_pool_stats()

print(f"PostgreSQL pool: {stats['postgres_pool']}")
print(f"SQLAlchemy pool: {stats['sqlalchemy_pool']}")
```

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

- **–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø—É–ª**: 2-5 —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –¥–ª—è –Ω–µ–±–æ–ª—å—à–∏—Ö –Ω–∞–≥—Ä—É–∑–æ–∫
- **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –ø—É–ª**: 10-20 —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –¥–ª—è –≤—ã—Å–æ–∫–∏—Ö –Ω–∞–≥—Ä—É–∑–æ–∫
- **Timeout**: 30 —Å–µ–∫—É–Ω–¥ - —Ä–∞–∑—É–º–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ —Å–ª—É—á–∞–µ–≤

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è

1. **–í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–∞–π–ª–æ–≤**
   - –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ PDF
   - –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ Excel
   - –í—Ä–µ–º—è AI-–∞–Ω–∞–ª–∏–∑–∞

2. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤**
   - CPU –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
   - –ü–∞–º—è—Ç—å (RAM)
   - –î–∏—Å–∫–æ–≤–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ

3. **–ö—ç—à —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞**
   - Hit rate –∫—ç—à–∞
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π –≤ –∫—ç—à–µ
   - –†–∞–∑–º–µ—Ä –∫—ç—à–∞

4. **Connection Pool —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞**
   - –ê–∫—Ç–∏–≤–Ω—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
   - –û–∂–∏–¥–∞—é—â–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
   - –û—à–∏–±–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

### –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

```python
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫—ç—à–∞
from utils.ai_cache import get_ai_cache
cache = get_ai_cache()
cache_stats = cache.get_stats()

# –ü—Ä–æ–≤–µ—Ä–∫–∞ connection pool
from utils.connection_pool import get_db_pool
pool = get_db_pool()
pool_stats = pool.get_pool_stats()

# –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
import logging
import time

logger = logging.getLogger(__name__)

def measure_time(func):
    def wrapper(*args, **kwargs):
        start_time = time.time()
        result = func(*args, **kwargs)
        elapsed_time = time.time() - start_time
        logger.info(f"{func.__name__} –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –∑–∞ {elapsed_time:.2f}—Å")
        return result
    return wrapper
```

---

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### –î–ª—è –º–∞–ª—ã—Ö –Ω–∞–≥—Ä—É–∑–æ–∫ (< 100 —Ñ–∞–π–ª–æ–≤/–¥–µ–Ω—å)

- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ: TTL 1 —á–∞—Å
- –ë–∞—Ç—á–∏–Ω–≥: 2 –≤–æ—Ä–∫–µ—Ä–∞, —Ä–∞–∑–º–µ—Ä –±–∞—Ç—á–∞ 5
- Connection Pool: min=2, max=5

### –î–ª—è —Å—Ä–µ–¥–Ω–∏—Ö –Ω–∞–≥—Ä—É–∑–æ–∫ (100-1000 —Ñ–∞–π–ª–æ–≤/–¥–µ–Ω—å)

- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ: TTL 2 —á–∞—Å–∞, Redis
- –ë–∞—Ç—á–∏–Ω–≥: 4 –≤–æ—Ä–∫–µ—Ä–∞, —Ä–∞–∑–º–µ—Ä –±–∞—Ç—á–∞ 10
- Connection Pool: min=5, max=10

### –î–ª—è –≤—ã—Å–æ–∫–∏—Ö –Ω–∞–≥—Ä—É–∑–æ–∫ (> 1000 —Ñ–∞–π–ª–æ–≤/–¥–µ–Ω—å)

- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ: TTL 4 —á–∞—Å–∞, Redis —Å –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å—é
- –ë–∞—Ç—á–∏–Ω–≥: 8+ –≤–æ—Ä–∫–µ—Ä–æ–≤, —Ä–∞–∑–º–µ—Ä –±–∞—Ç—á–∞ 20
- Connection Pool: min=10, max=20
- –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–≤

---

## üîß –¢—é–Ω–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

```sql
-- –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤
CREATE INDEX idx_uploads_batch_id ON uploads(batch_id);
CREATE INDEX idx_uploads_enterprise_id ON uploads(enterprise_id);
CREATE INDEX idx_uploads_created_at ON uploads(created_at);

-- –ê–Ω–∞–ª–∏–∑ —Ç–∞–±–ª–∏—Ü –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
ANALYZE uploads;
ANALYZE enterprises;
```

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è Redis

```bash
# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Redis –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
maxmemory 2gb
maxmemory-policy allkeys-lru
save ""  # –û—Ç–∫–ª—é—á–∏—Ç—å –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –¥–ª—è –∫—ç—à–∞ (–µ—Å–ª–∏ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ)
```

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è Docker

```yaml
# –í docker-compose.prod.yml
deploy:
  resources:
    limits:
      cpus: '2.0'
      memory: 2G
    reservations:
      cpus: '0.5'
      memory: 512M
```

---

## üìà –ë–µ–Ω—á–º–∞—Ä–∫–∏

### –û–∂–∏–¥–∞–µ–º–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- **PDF –æ–±—Ä–∞–±–æ—Ç–∫–∞**: 5-15 —Å–µ–∫—É–Ω–¥ –Ω–∞ —Ñ–∞–π–ª (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ä–∞–∑–º–µ—Ä–∞)
- **Excel –æ–±—Ä–∞–±–æ—Ç–∫–∞**: 2-5 —Å–µ–∫—É–Ω–¥ –Ω–∞ —Ñ–∞–π–ª
- **AI-–∞–Ω–∞–ª–∏–∑**: 1-3 —Å–µ–∫—É–Ω–¥—ã (—Å –∫—ç—à–µ–º), 5-10 —Å–µ–∫—É–Ω–¥ (–±–µ–∑ –∫—ç—à–∞)
- **–ë–∞—Ç—á–µ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞**: 10-20 —Ñ–∞–π–ª–æ–≤ –≤ –º–∏–Ω—É—Ç—É (4 –≤–æ—Ä–∫–µ—Ä–∞)

---

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –†–µ–∞–ª—å–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∞–ø–ø–∞—Ä–∞—Ç–Ω–æ–≥–æ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è, —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–æ–≤ –∏ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ —Å–∏—Å—Ç–µ–º—É.

