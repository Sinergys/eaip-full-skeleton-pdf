# Production Observability - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏–∑ –ø—Ä–æ–º–ø—Ç–∞

### 1. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤ ‚úÖ
**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–æ–º–ø—Ç –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–ª –¥—Ä—É–≥—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É  
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** –°–æ–∑–¥–∞–Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ `monitoring/` —Å –ø–æ–¥–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è–º–∏

### 2. Alertmanager –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è ‚úÖ
**–ü—Ä–æ–±–ª–µ–º–∞:** Alertmanager –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –Ω–∞–ø—Ä—è–º—É—é –≤ YAML  
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** 
- –°–æ–∑–¥–∞–Ω —à–∞–±–ª–æ–Ω `alertmanager.yml.template`
- –°–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `envsubst` –¥–ª—è –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
- –°–æ–∑–¥–∞–Ω –≥–æ—Ç–æ–≤—ã–π `alertmanager.yml` —Å –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–∞–º–∏

### 3. Node Exporter network_mode ‚úÖ
**–ü—Ä–æ–±–ª–µ–º–∞:** `network_mode: host` –Ω–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –±—ã—Ç—å –≤ —Å–µ—Ç–∏ `monitoring`  
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** –£–±—Ä–∞–Ω `network_mode: host`, –¥–æ–±–∞–≤–ª–µ–Ω –≤ —Å–µ—Ç—å `monitoring` —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ volumes

### 4. Blackbox Exporter –∏–º—è —Å–µ—Ä–≤–∏—Å–∞ ‚úÖ
**–ü—Ä–æ–±–ª–µ–º–∞:** –í –ø—Ä–æ–º–ø—Ç–µ `blackbox`, –Ω–æ –≤ –∫–æ–Ω—Ñ–∏–≥–∞—Ö `blackbox-exporter`  
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–æ –Ω–∞ `blackbox-exporter` –≤–æ –≤—Å–µ—Ö –∫–æ–Ω—Ñ–∏–≥–∞—Ö

### 5. Loki retention ‚úÖ
**–ü—Ä–æ–±–ª–µ–º–∞:** –í –ø—Ä–æ–º–ø—Ç–µ —É–∫–∞–∑–∞–Ω–æ 14 –¥–Ω–µ–π, –Ω–æ –≤ –∫–æ–Ω—Ñ–∏–≥–µ –±—ã–ª–æ 30 –¥–Ω–µ–π  
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** –û–±–Ω–æ–≤–ª–µ–Ω–æ –Ω–∞ 14 –¥–Ω–µ–π (336h) –≤ `loki-config.yml`

### 6. Prometheus –ø—É—Ç–∏ –∫ —Ñ–∞–π–ª–∞–º ‚úÖ
**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—É—Ç–∏ –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞–ª–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ  
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** –í—Å–µ –ø—É—Ç–∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã –¥–ª—è –Ω–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã `prometheus/`

### 7. Grafana dashboards path ‚úÖ
**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—É—Ç—å –≤ dashboards.yml  
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** –û–±–Ω–æ–≤–ª–µ–Ω –Ω–∞ `/var/lib/grafana/dashboards`

### 8. Caddyfile —Å–∏–Ω—Ç–∞–∫—Å–∏—Å ‚úÖ
**–ü—Ä–æ–±–ª–µ–º–∞:** –ù—É–∂–Ω–æ –±—ã–ª–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏–Ω—Ç–∞–∫—Å–∏—Å  
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** –°–æ–∑–¥–∞–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π Caddyfile —Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–æ–º

### 9. –í–µ—Ä—Å–∏–∏ –æ–±—Ä–∞–∑–æ–≤ ‚úÖ
**–ü—Ä–æ–±–ª–µ–º–∞:** –ù—É–∂–Ω–æ –±—ã–ª–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å  
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ —Å—Ç–∞–±–∏–ª—å–Ω—ã–µ –≤–µ—Ä—Å–∏–∏

### 10. –°–∫—Ä–∏–ø—Ç —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è ‚úÖ
**–ü—Ä–æ–±–ª–µ–º–∞:** –í –ø—Ä–æ–º–ø—Ç–µ –Ω–µ –±—ã–ª–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞  
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** –°–æ–∑–¥–∞–Ω `deploy-prod-monitoring.sh` —Å –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–æ–π —à–∞–±–ª–æ–Ω–æ–≤

## üìÅ –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- ‚úÖ `docker-compose.prod.monitoring.yml` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω (Node Exporter, –∏–º–µ–Ω–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤)
- ‚úÖ `prometheus/prometheus.yml` - –æ–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è production
- ‚úÖ `prometheus/blackbox.yml` - —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω
- ‚úÖ `prometheus/rules/health.yml` - —É–ø—Ä–æ—â–µ–Ω–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞
- ‚úÖ `alertmanager/alertmanager.yml` - —Å –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–∞–º–∏
- ‚úÖ `alertmanager/alertmanager.yml.template` - —à–∞–±–ª–æ–Ω —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏
- ‚úÖ `loki/loki-config.yml` - —Å retention 14 –¥–Ω–µ–π
- ‚úÖ `promtail/promtail-config.yml` - —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω
- ‚úÖ `caddy/Caddyfile` - –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å

### Grafana
- ‚úÖ `grafana/provisioning/datasources/datasources.yml` - –∞–≤—Ç–æ–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- ‚úÖ `grafana/provisioning/dashboards/dashboards.yml` - –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—É—Ç—å
- ‚úÖ `grafana/dashboards/eaip-services.json` - —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω

### –°–∫—Ä–∏–ø—Ç—ã –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- ‚úÖ `deploy-prod-monitoring.sh` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–∫—Ä–∏–ø—Ç —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
- ‚úÖ `README.md` - –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
- ‚úÖ `PRODUCTION_DEPLOYMENT.md` - –ø–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ
- ‚úÖ `.env.prod.monitoring.example` - –ø—Ä–∏–º–µ—Ä –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

## üîß –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

1. **Health checks** - –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
2. **–ò–º–µ–Ω–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤** - –¥–æ–±–∞–≤–ª–µ–Ω —Å—É—Ñ—Ñ–∏–∫—Å `-prod` –¥–ª—è —è—Å–Ω–æ—Å—Ç–∏
3. **–ü—Ä–æ–≤–µ—Ä–∫–∏ –≤ —Å–∫—Ä–∏–ø—Ç–µ** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä—Ç–æ–≤, —Ñ–∞–π–ª–æ–≤, –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
4. **–û–±—Ä–∞–±–æ—Ç–∫–∞ —à–∞–±–ª–æ–Ω–æ–≤** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ `alertmanager.yml.template`
5. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** - –ø–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ —Å troubleshooting

## ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

–í—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω—ã, —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–æ–∑–¥–∞–Ω–∞, —Ñ–∞–π–ª—ã –≥–æ—Ç–æ–≤—ã –∫ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é –Ω–∞ production —Å–µ—Ä–≤–µ—Ä–µ.

---

**–î–∞—Ç–∞:** 2025-11-08  
**–í–µ—Ä—Å–∏—è:** v0.3.0

